@using DMS.Application.Interfaces.Setup.ModuleRepository
@using DMS.Application.Interfaces.Setup.UserRepository
@inject IStringLocalizer<SharedResources> localizer

@inject IUserRepository _userRepo;
@inject IModuleRepository _moduleRepo;

@{
    // Layout = "_SidebarLayout";
    ViewData["Title"] = "Home Page";

    int userId = int.Parse(User.Identity.Name);
    var user = await _userRepo.GetByIdNoTrackingAsync(userId);
}

<div class="row">
    <div class="col-xl-8">
        <div class="row">
            <div class="row">
                <div class="d-flex flex-row">
                    <h1 class="display-6">Hi, <span id="user_first_name">@user.FirstName ?? Juan</span>! Welcome back.</h1>
                </div>
                <div class="d-flex flex-row">
                    <p class="text-muted">
                        Your application is currently <span id="process_status" class="text-warning">awaiting</span> for <span id="process_name" class="text-primary">Pag-IBIG's verification</span>
                    </p>
                </div>
            </div>

            <div class="row">
                <div class="card" style="min-height: 500px;">
                    <div class="custom-ribbon" id="custom_ribbon">
                        <div class="custom-ribbon-top-right text-capitalize" id="status_contract">
                            Developer Verified
                        </div>
                    </div>

                    <div class="row h-100">
                        <div class="col-1 bg-warning beneficiary-sidecard" id="beneficiary_sidecard">
                            <p class="fs-3 mx-auto my-auto" id="beneficiary_sidecard_text">
                                Credit Verification
                            </p>
                        </div>
                        <div class="col-11">
                            <div class="card-body d-flex flex-column">
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <p>Reference Number</p>
                                        <h1 id="reference_number" class="fs-2 text-primary">APL2020-0892</h1>
                                    </div>
                                    <div class="col-6">
                                        <img class="img-fluid" src="~/images/juantahananassets/logo/zeta_landscape_logo.png" alt="..." />
                                    </div>
                                </div>
                                <div class="row align-items-end">
                                    <div class="col-4">
                                        <img class="img-fluid" src="~/images/juantahananassets/logo/arao_logo.png" alt="..." />
                                    </div>
                                    <div class="col-4">
                                        <img class="img-fluid" src="~/images/juantahananassets/sample/layoutsample.png" alt="..." />
                                    </div>
                                    <div class="col-4">
                                        <div class="row mb-1">
                                            <p>Requested Loan Amount</p>
                                            <h1 class="fs-2 text-primary">₱ <span data-plugin="counterup"  id="requested_loan_amount">500,000.00</span></h1>
                                        </div>
                                        <div class="row mb-1">
                                            <p>Loan Term</p>
                                            <h1 class="fs-2 text-primary"><span data-plugin="counterup" id="loan_term">10</span> YEARS</h1>
                                        </div>
                                        <div class="row mb-1">
                                            <p>Project Location</p>
                                            <h1 id="project_location" class="fs-2 text-primary">Bacolod City</h1>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-6">
                    <div class="card flex-fill">
                        <div class="card-body">
                            <div class="d-flex flex-column text-center align-items-center">
                                <div class="row text-muted mb-2">Your application is currently at</div>
                                <div class="row">
                                    <h1 id="application_status" class="fs-3 fw-bolder text-warning">Credit Verification</h1>
                                </div>
                                <div id="application_status_remarks" class="row text-muted">Ends after Pag-IBIG credit verification</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6">
                    <div class="card flex-fill">
                        <div class="card-body align-items-center">                            
                            <div class="d-flex flex-column text-center align-items-center">
                                <div class="row text-muted mb-2">Your credit history has just been</div>
                                <div class="row">
                                    <h1 id="credit_history_status" class="fs-3 fw-bolder text-success">Developer Verified</h1>
                                </div>
                                <div id="credit_history_remarks" class="row text-muted">A Pag-IBIG officer will review your eligibility shortly</div>                            
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
    </div>

    <div class="col-xl-4">
        <div class="row">
            <div class="col-xl-12">
                <div class="card rounded-4">
                    <div class="card-header rounded-4 rounded-bottom d-flex justify-content-start">
                        <h4 class="header-title mb-0 me-1">
                            Track Loan Application
                        </h4>

                    </div>
                    <p><span class="badge bg-warning text-theme-primary ms-3">ONGOING DEVELOPMENT</span></p>
                    <div class="card-body py-0 mb-3" data-simplebar="init" style="max-height: 50vh;">


                        <div class="simplebar-wrapper" style="margin: 0px -24px;">
                            <div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask">
                                <div class="simplebar-offset" style="right: 0px; bottom: 0px;">
                                    <div class="simplebar-content-wrapper" tabindex="0" role="region" aria-label="scrollable content" style="height: auto; overflow: hidden scroll;">
                                        <div class="simplebar-content" style="padding: 0px 24px;">
                                            <div class="timeline-alt py-0">
                                                <div class="timeline-item">
                                                    <i class="fe-check-circle text-info timeline-icon"></i>
                                                    <div class="timeline-item-info">
                                                        <a href="javascript:void(0);" class="text-info fw-bold mb-0 d-block">Submitted</a>
                                                        <p class="mb-0">Credit Verification</p>
                                                        <p>
                                                            <small class="text-muted">October 12 2020</small>
                                                        </p>
                                                    </div>
                                                </div>

                                                <div class="timeline-item">
                                                    <i class="fe-check-circle bg-primary-lighten text-info timeline-icon"></i>
                                                    <div class="timeline-item-info">
                                                        <a href="javascript:void(0);" class="text-info fw-bold mb-0 d-block">Developer Verified</a>
                                                        <p class="mb-0">Credit Verification</p>
                                                        <p>
                                                            <small class="text-muted">October 14 2020</small>
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="timeline-item">
                                                    <i class="fe-check-circle bg-primary-lighten text-info timeline-icon"></i>
                                                    <div class="timeline-item-info">
                                                        <a href="javascript:void(0);" class="text-info fw-bold mb-0 d-block">Pag-IBIG Verification</a>
                                                        <p>Credit Verification</p>

                                                    </div>
                                                </div>
                                                <div class="timeline-item">
                                                    <i class="fe-circle bg-primary-lighten text-info timeline-icon"></i>
                                                    <div class="timeline-item-info">
                                                        <a href="javascript:void(0);" class="text-info fw-bold mb-0 d-block">Submission</a>

                                                        <p>Application Completion</p>

                                                    </div>
                                                </div>
                                                <div class="timeline-item">
                                                    <i class="fe-circle bg-primary-lighten text-info timeline-icon"></i>
                                                    <div class="timeline-item-info">
                                                        <a href="javascript:void(0);" class="text-info fw-bold mb-0 d-block">Developer Approval</a>
                                                        <p>Application Completion</p>

                                                    </div>
                                                </div>
                                                <div class="timeline-item">
                                                    <i class="fe-circle bg-primary-lighten text-info timeline-icon"></i>
                                                    <div class="timeline-item-info">
                                                        <a href="javascript:void(0);" class="text-info fw-bold mb-0 d-block">Pag-IBIG Approval</a>
                                                        <p>Application Completion</p>

                                                    </div>
                                                </div>
                                                <div class="fe-circle timeline-item">
                                                    <i class="fe-circle bg-primary-lighten text-info timeline-icon"></i>
                                                    <div class="timeline-item-info">
                                                        <a href="javascript:void(0);" class="text-info fw-bold mb-1 d-block">Post-Approval Processing</a>
                                                        <p>Post-Approval</p>

                                                    </div>
                                                </div>



                                                <div class="fe-circle timeline-item">
                                                    <i class="fe-circle bg-primary-lighten text-info timeline-icon"></i>
                                                    <div class="timeline-item-info">
                                                        <a href="javascript:void(0);" class="text-info fw-bold mb-0 d-block">Loan Disbursement</a>


                                                    </div>
                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div><div class="simplebar-placeholder" style="width: auto; height: 533px;"></div>
                        </div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: visible;"><div class="simplebar-scrollbar" style="height: 434px; transform: translate3d(0px, 0px, 0px); display: block;"></div></div>
                    </div>
                </div>
            </div> <!-- end col-->

        </div>
    </div>
</div>
